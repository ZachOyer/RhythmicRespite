<div class="background">
  <div class="container pb-5">
    <div class="row">
      <h1>Welcome to Rhythmic Respite</h1>
    </div>
    <div class="row input-box">
      <div class="input-group">
        <input class="form-control my-input" placeholder="Search for a poem..." [(ngModel)]="searchTerm" (keyup)="filterPoems()">
        <button class="btn btn-clear" *ngIf="searchTerm.length > 0" (click)="clearSearch()"><fa-icon [icon]="faClear"></fa-icon></button>
      </div>

      <div class="mt-2" style="color: rgb(187, 186, 186)">Filter by:</div>
      <div class="btn-group" role="group" aria-label="Filtering button group">
        <input type="radio" class="btn-check radio-btn" name="filterbtn" id="filterbtn1" autocomplete="off" (change)="filterPoems('None')" checked>
        <label class="btn my-button px-1" for="filterbtn1"><div class="btn-text">None</div></label>
        <input type="radio" class="btn-check radio-btn" name="filterbtn" id="filterbtn2" autocomplete="off" (change)="filterPoems('Short')">
        <label class="btn my-button px-1" for="filterbtn2"><div class="btn-text">Short</div></label>
        <input type="radio" class="btn-check radio-btn" name="filterbtn" id="filterbtn3" autocomplete="off" (change)="filterPoems('Medium')">
        <label class="btn my-button px-1" for="filterbtn3"><div class="btn-text">Medium</div></label>
        <input type="radio" class="btn-check radio-btn" name="filterbtn" id="filterbtn4" autocomplete="off" (change)="filterPoems('Long')">
        <label class="btn my-button px-1" for="filterbtn4"><div class="btn-text">Long</div></label>
      </div>

      <div class="mt-2" style="color: rgb(187, 186, 186)">Sort by:</div>
      <div class="btn-group">
        <input type="radio" class="btn-check radio-btn" name="sortbtn" id="sortbtn1" autocomplete="off" (change)="sortPoems(0)" checked>
        <label class="btn my-button px-0" for="sortbtn1"><div class="btn-text">None</div></label>
        <input type="radio" class="btn-check radio-btn" name="sortbtn" id="sortbtn2" autocomplete="off" (change)="sortPoems(-1)">
        <label class="btn my-button px-0" for="sortbtn2"><div class="btn-text">Newest</div></label>
        <input type="radio" class="btn-check radio-btn" name="sortbtn" id="sortbtn3" autocomplete="off" (change)="sortPoems(1)">
        <label class="btn my-button px-0" for="sortbtn3"><div class="btn-text">Oldest</div></label>
      </div>
    </div>
    <div class="row mx-0">
      <div class="col-12 my-card" (click)="goToPoem(poem.url)" *ngFor="let poem of filteredPoems" @flyInOutRight>
        <div class="row mx-0">
          <div class="title col-12 mt-1">{{poem.title}}</div>
          <div class="row mx-0 card-data">
            <div class="col-6 col-md-auto desc">
              <div class="data-tag">{{poem.length.length > 1 ? 'Poem ' + (counter % poem.wordCount.length + 1) + ' ' : ''}}Length</div>
              <div class="ps-2 data-small text-center">{{poem.length[counter % poem.wordCount.length]}}</div>
              <div class="progress ms-2">
                <div *ngIf="poem.length[counter % poem.wordCount.length] === 'Short'" class="progress-bar bg-warning" role="progressbar" [attr.style]="'width: ' + ((poem.wordCount[counter % poem.wordCount.length] / longestPoem) * 100) + '%'" aria-valuemin="0" aria-valuemax="100"></div>
                <div *ngIf="poem.length[counter % poem.wordCount.length] === 'Medium'" class="progress-bar bg-info" role="progressbar" [attr.style]="'width: ' + ((poem.wordCount[counter % poem.wordCount.length] / longestPoem) * 100) + '%'" aria-valuemin="0" aria-valuemax="100"></div>
                <div *ngIf="poem.length[counter % poem.wordCount.length] === 'Long'" class="progress-bar bg-success" role="progressbar" [attr.style]="'width: ' + ((poem.wordCount[counter % poem.wordCount.length] / longestPoem) * 100) + '%'" aria-valuemin="0" aria-valuemax="100"></div>
              </div>
            </div>
            <div class="col-6 col-md-auto desc">
              <div class="data-tag">Date Written</div>
              <div class="ps-2 data">{{formatDate(poem.date)}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


